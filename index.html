<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Catálogo – Rabisco & Arte</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
/* =======================
   ESTILO ORIGINAL
======================= */
*{ margin:0; padding:0; box-sizing:border-box; font-family:"Poppins",sans-serif;}
body{ background:#F9F8FC; color:#6C5243; overflow-x:hidden; }

.container-vermelho{ background:linear-gradient(90deg,#DED8CC,#ADAC8C); padding:12px; text-align:center; font-weight:600;}
.texto-branco{ color:#000; }

header{
  text-align:center;
  padding:35px 0;
  background:#111;
  border-bottom:2px solid #ADAC8C;
}
header img{width:280px;max-width:80%;}

h3{text-align:center;margin:20px;color:#6C5243;letter-spacing:2px;}

.filtro-container{
  display:flex;
  justify-content:center;
  gap:12px;
  flex-wrap:wrap;
  margin:25px 10px;
}
.filtro-container button{
  background:linear-gradient(135deg,#DED8CC,#ADAC8C);
  border:none;
  padding:10px 18px;
  border-radius:25px;
  font-weight:600;
  cursor:pointer;
}
.filtro-container button.ativo{
  background:#111;
  color:#ADAC8C;
}

/* GRID */
main{
  max-width:1100px;
  margin:30px auto;
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(300px,1fr));
  gap:25px;
  padding:0 15px;
}

/* CARD */
.produto{
  background:#fff;
  border-radius:18px;
  overflow:hidden;
  box-shadow:0 6px 15px rgba(173,172,140,.18);
  position:relative;
  display:none;
}
.produto img{width:100%; height:230px; object-fit:cover;}
.produto-content{padding:18px;}
.produto h2{color:#ADAC8C;margin-bottom:6px;}
.produto p{margin:8px 0;}
.preco{font-weight:800;color:#ADAC8C;}

.badge{
  position:absolute;
  top:12px;
  left:12px;
  background:linear-gradient(90deg,#b13f3f,#e06666);
  color:#fff;
  padding:6px 12px;
  border-radius:15px;
  font-size:11px;
  font-weight:700;
}

/* BOTÃO */
.actions{text-align:center;padding:14px 18px 22px;}
.actions button{
  background:linear-gradient(135deg,#DED8CC,#ADAC8C,#DED8CC);
  border:none;
  color:#6C5243;
  padding:12px 26px;
  border-radius:30px;
  cursor:pointer;
  font-weight:700;
  box-shadow:0 4px 10px rgba(173,172,140,.35);
  transition:.25s;
}
.actions button:hover{ transform:translateY(-3px); }

/* PAGINAÇÃO ORIGINAL */
.pagination-container{
  display:flex;
  justify-content:center;
  align-items:center;
  gap:15px;
  margin:30px 0 60px;
}
.pagination-container button{
  background:linear-gradient(135deg,#DED8CC,#ADAC8C);
  border:none;
  padding:10px 18px;
  border-radius:30px;
  color:#6C5243;
  font-weight:700;
  cursor:pointer;
  box-shadow:0 4px 12px rgba(173,172,140,.32);
}
.pagination-container button:disabled{
  opacity:.45;
  cursor:not-allowed;
}
#page-info{color:#ADAC8C;font-weight:800;}

/* MODAL (compacto) */
#modal{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.7);
  display:none;
  justify-content:center;
  align-items:center;
  z-index:999;
}
.modal-premium{
  background:#fff;
  width:92%;
  max-width:420px;
  padding:18px;
  border-radius:16px;
  text-align:center;
}
.modal-premium img{
  width:100%;
  max-height:180px;
  object-fit:cover;
  border-radius:12px;
}
.modal-premium input{
  width:100%;
  padding:10px;
  margin:6px 0;
  border-radius:8px;
  border:1px solid #ddd;
}
.modal-premium button{
  width:100%;
  background:#25D366;
  border:none;
  padding:14px;
  border-radius:12px;
  color:#fff;
  font-weight:800;
  cursor:pointer;
}

/* FOOTER RESTAURADO */
footer{
  background:#111;
  color:#aaa;
  text-align:center;
  padding:25px 10px;
  border-top:2px solid #c7a008;
}
footer a{ color:#ADAC8C; font-weight:700; text-decoration:none;}
.social-icons a{
  margin:0 10px;
  font-size:1.3em;
  color:#ADAC8C;
}
</style>
</head>

<body>

<div class="container-vermelho">
<p class="texto-branco">⏰ Últimos dias para encomendar sua cesta!</p>
</div>

<header>
<img src="imgs/logo.png" alt="Rabisco & Arte">
</header>

<h3>CATÁLOGO PREMIUM</h3>

<!-- FILTROS -->
<div class="filtro-container" id="filtroContainer">
<button data-cat="todos" class="ativo">Todos</button>
<button data-cat="canecas">Canecas</button>
<button data-cat="copos">Copos</button>
<button data-cat="presentes">Presentes</button>
<button data-cat="decoracao">Decoração</button>
<button data-cat="vestuario">Vestuário</button>
</div>

<main id="catalogo"></main>

<!-- PAGINAÇÃO -->
<div class="pagination-container">
<button id="prev">◀ Anterior</button>
<span id="page-info">Página 1</span>
<button id="next">Próximo ▶</button>
</div>

<!-- MODAL -->
<div id="modal">
  <div class="modal-premium">
    <h3 id="produtoNome"></h3>
    <img id="modalImg">
    <input id="nome" placeholder="Seu nome">
    <input id="cidade" placeholder="Cidade">
    <input id="cupom" placeholder="Cupom">
    <p id="total"></p>
    <button onclick="enviarPedido()">Finalizar no WhatsApp</button>
  </div>
</div>

<!-- FOOTER -->
<footer>
<p>&copy; 2025 Rabisco & Arte</p>
<p>Desenvolvido por <a href="#">Two Designer / Grupo Mega</a></p>
<div class="social-icons">
<a href="#"><i class="fas fa-phone"></i></a>
<a href="#"><i class="fab fa-instagram"></i></a>
<a href="#"><i class="fab fa-whatsapp"></i></a>
</div>
</footer>

<script>
const telefone = "5585994083703";
let produtoAtual = "", precoAtual = 0;
let paginaAtual = 1;
const produtosPorPagina = 6;
let todosProdutos = [];

/* === ABRIR MODAL === */
function abrirModal(nome, preco, imagem){
  produtoAtual = nome;
  precoAtual = parseFloat(preco.replace(",", "."));
  document.getElementById("produtoNome").innerText = nome;
  document.getElementById("modalImg").src = imagem;
  document.getElementById("modal").style.display = "flex";
  atualizarTotal();
}

/* === FECHAR MODAL === */
document.getElementById("modal").onclick = e=>{
  if(e.target.id==="modal") document.getElementById("modal").style.display="none";
}

/* === TOTAL === */
function atualizarTotal(){
  document.getElementById("total").innerText = "Total: R$ " + precoAtual.toFixed(2);
}

/* === WHATS === */
function enviarPedido(){
  let nome = document.getElementById("nome").value;
  let cidade = document.getElementById("cidade").value;
  let texto = `Pedido: ${produtoAtual} | R$ ${precoAtual.toFixed(2)} | Nome: ${nome} | Cidade: ${cidade}`;
  window.location.href = `https://wa.me/${telefone}?text=` + encodeURIComponent(texto);
}

/* === FILTRO === */
document.querySelectorAll("#filtroContainer button").forEach(btn=>{
  btn.onclick = ()=>{
    document.querySelectorAll("#filtroContainer button").forEach(b=>b.classList.remove("ativo"));
    btn.classList.add("ativo");
    filtrar(btn.dataset.cat);
  }
});

function filtrar(cat){
  let filtrados = [];
  todosProdutos.forEach(p=>{
    p.style.display = "none";
    if(cat==="todos" || p.dataset.categoria===cat) filtrados.push(p);
  });
  todosProdutos = filtrados;
  paginaAtual = 1;
  mostrarProdutos();
}

/* === PAGINAÇÃO === */
function mostrarProdutos(){
  const inicio = (paginaAtual - 1) * produtosPorPagina;
  const fim = paginaAtual * produtosPorPagina;
  todosProdutos.forEach(p => p.style.display="none");
  todosProdutos.slice(inicio, fim).forEach(p=>p.style.display="block");

  document.getElementById("page-info").innerText =
    `Página ${paginaAtual} de ${Math.ceil(todosProdutos.length / produtosPorPagina) || 1}`;

  document.getElementById("prev").disabled = paginaAtual === 1;
  document.getElementById("next").disabled = paginaAtual >= Math.ceil(todosProdutos.length / produtosPorPagina);
}

document.getElementById("prev").onclick = ()=>{if(paginaAtual>1){paginaAtual--;mostrarProdutos();}};
document.getElementById("next").onclick = ()=>{if(paginaAtual < Math.ceil(todosProdutos.length / produtosPorPagina)) {paginaAtual++;mostrarProdutos();}};

/* === CARREGAR PLANILHA === */
async function carregarProdutos(){
  const res = await fetch("https://script.google.com/macros/s/AKfycbw23ih5MavfHkC2JTchCaRSlY63VkDQZZ5H0TtvZ43nsiK8-zP8aLhGSWEtHenz9Lm_/exec");
  const lista = await res.json();
  const catalogo = document.getElementById("catalogo");

  lista.forEach(p=>{
    catalogo.innerHTML += `
      <div class="produto" data-categoria="${p.categoria}">
        ${p.badge ? `<span class="badge">${p.badge}</span>` : ""}
        <img src="${p.imagem}">
        <div class="produto-content">
          <h2>${p.nome}</h2>
          <p>${p.descricao}</p>
          <p class="preco">R$ ${p.preco}</p>
        </div>
        <div class="actions">
          <button onclick="abrirModal('${p.nome}','${p.preco}','${p.imagem}')">ENCOMENDAR AGORA</button>
        </div>
      </div>
    `;
  });

  todosProdutos = Array.from(document.querySelectorAll(".produto"));
  mostrarProdutos();
}
carregarProdutos();
</script>

</body>
</html>
